# Google Sign-In Setup Guide

## Prerequisites

✅ Firebase project created  
✅ Google Sign-In enabled in Firebase Console

## Step 1: Enable Google Sign-In in Firebase

1. Go to [Firebase Console](https://console.firebase.google.com/)
2. Select your project: `mandir-3e41e`
3. Go to **Authentication** → **Sign-in method**
4. Click on **Google**
5. Toggle **Enable**
6. Enter **Project support email** (your email)
7. Click **Save**

## Step 2: Get OAuth 2.0 Client ID

### For Web (Required):

1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Select your Firebase project (`mandir-3e41e`)
3. Go to **APIs & Services** → **Credentials**
4. Find **Web client (auto created by Google Service)** under **OAuth 2.0 Client IDs**
5. Click on it to view details
6. Copy the **Client ID** (looks like: `123456789-abc123...apps.googleusercontent.com`)

### For Android (Optional, for APK):

1. In Google Cloud Console → **Credentials**
2. Create new **OAuth 2.0 Client ID** for Android
3. Package name: `com.mymandir.app`
4. SHA-1 certificate fingerprint (get from EAS or local keystore)

### For iOS (Optional):

1. Create new **OAuth 2.0 Client ID** for iOS
2. Bundle ID: `com.mymandir.app`

## Step 3: Add Client ID to Environment

Add the Web Client ID to your `.env` file:

```env
GOOGLE_CLIENT_ID=your_google_web_client_id_here
```

Or update `app.config.ts` to include it in the `extra` section:

```typescript
extra: {
  // ... other config
  googleClientId: process.env.GOOGLE_CLIENT_ID || "",
}
```

## Step 4: Update Google Auth Service (if needed)

If you put the Client ID in `app.config.ts`, update `googleAuthService.ts`:

```typescript
const getGoogleClientId = (): string => {
  return Constants.expoConfig?.extra?.googleClientId || 
         process.env.GOOGLE_CLIENT_ID || 
         `${env.firebase.projectId}.apps.googleusercontent.com`;
};
```

## Step 5: Test Google Sign-In

1. Restart Expo server: `npm start`
2. Open the app
3. Click **"Continue with Google"**
4. Select your Google account
5. Authorize the app
6. You should be signed in!

## Troubleshooting

### "Invalid client_id"
- Make sure the Client ID is correct
- Check that it's the Web Client ID, not Android/iOS
- Verify the Client ID is added to `.env` or `app.config.ts`

### "Redirect URI mismatch"
- The redirect URI is automatically generated by Expo
- Make sure you're using the correct scheme (`com.mymandir.app`)
- For web, ensure the redirect URI matches

### "Google sign-in cancelled"
- User cancelled the sign-in - this is normal
- Try again and complete the flow

### Firebase Authentication Error
- Make sure Google Sign-In is enabled in Firebase Console
- Check that the OAuth consent screen is configured in Google Cloud Console
- Verify your Firebase project is active

## Quick Start (Minimal Setup)

If you just want to test quickly:

1. Enable Google Sign-In in Firebase Console (Step 1)
2. Get Web Client ID from Firebase Console → Project Settings → Your apps
3. Add to `.env`: `GOOGLE_CLIENT_ID=your_client_id_here`
4. Restart server: `npm start`
5. Test!

---

For detailed Firebase Google Sign-In documentation:  
https://firebase.google.com/docs/auth/web/google-signin



